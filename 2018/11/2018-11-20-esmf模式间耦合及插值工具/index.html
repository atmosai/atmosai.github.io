<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>ESMF:模式间耦合及插值工具 | bugsuse</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="About LoveIt Theme"><link rel=prev href=https://atmosai.github.io/2018/11/2018-11-19-wrf%E6%A8%A1%E5%BC%8F%E5%B5%8C%E5%A5%97%E6%A8%A1%E6%8B%9F/><link rel=next href=https://atmosai.github.io/2018/12/2018-12-04-%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%9B%BE/><link rel=canonical href=https://atmosai.github.io/2018/11/2018-11-20-esmf%E6%A8%A1%E5%BC%8F%E9%97%B4%E8%80%A6%E5%90%88%E5%8F%8A%E6%8F%92%E5%80%BC%E5%B7%A5%E5%85%B7/><link rel="shortcut icon" type=image/x-icon href=/img/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon-16x16.png><link rel=manifest href=/img/site.webmanifest><link rel=mask-icon href=/img/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta property="og:title" content="ESMF:模式间耦合及插值工具"><meta property="og:description" content="ESMF是用于耦合天气，气候和相关模式的工具，具有稳定，并行化和可扩展的插值(remapping)包，通常用于生成插值权重。ESMF可以处理"><meta property="og:type" content="article"><meta property="og:url" content="https://atmosai.github.io/2018/11/2018-11-20-esmf%E6%A8%A1%E5%BC%8F%E9%97%B4%E8%80%A6%E5%90%88%E5%8F%8A%E6%8F%92%E5%80%BC%E5%B7%A5%E5%85%B7/"><meta property="article:published_time" content="2018-11-20T19:33:36+08:00"><meta property="article:modified_time" content="2018-11-20T19:33:36+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ESMF:模式间耦合及插值工具"><meta name=twitter:description content="ESMF是用于耦合天气，气候和相关模式的工具，具有稳定，并行化和可扩展的插值(remapping)包，通常用于生成插值权重。ESMF可以处理"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ESMF:模式间耦合及插值工具","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/atmosai.github.io\/2018\/11\/2018-11-20-esmf%E6%A8%A1%E5%BC%8F%E9%97%B4%E8%80%A6%E5%90%88%E5%8F%8A%E6%8F%92%E5%80%BC%E5%B7%A5%E5%85%B7\/"},"image":{"@type":"ImageObject","url":"https:\/\/atmosai.github.io\/cover.png","width":800,"height":600},"genre":"posts","keywords":"ESMF","wordcount":1254,"url":"https:\/\/atmosai.github.io\/2018\/11\/2018-11-20-esmf%E6%A8%A1%E5%BC%8F%E9%97%B4%E8%80%A6%E5%90%88%E5%8F%8A%E6%8F%92%E5%80%BC%E5%B7%A5%E5%85%B7\/","datePublished":"2018-11-20T19:33:36\x2b08:00","dateModified":"2018-11-20T19:33:36\x2b08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"bugsuse","logo":{"@type":"ImageObject","url":"https:\/\/atmosai.github.io\/img\/res.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/css/lib/animate/animate.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=navbar-container><div class="navbar-header animated bounceIn"><a href=https://atmosai.github.io>bugsuse</a></div><div class=navbar-menu><a class=menu-item href=https://atmosai.github.io/posts>Posts</a><a class=menu-item href=https://atmosai.github.io/atmos>Atmos</a><a class=menu-item href=https://atmosai.github.io/model>Model</a><a class=menu-item href=https://atmosai.github.io/tools>Tools</a><a class=menu-item href=https://atmosai.github.io/tags>Tags</a><a class=menu-item href=https://atmosai.github.io/categories>Categories</a><a class=menu-item href=https://atmosai.github.io/friends>Friends</a><a class=menu-item href=https://atmosai.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><nav class=navbar-mobile><div class=navbar-container><div class=navbar-header><div class="navbar-header-title animated bounceIn"><a href=https://atmosai.github.io>bugsuse</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://atmosai.github.io/posts>Posts</a><a class=menu-item href=https://atmosai.github.io/atmos>Atmos</a><a class=menu-item href=https://atmosai.github.io/model>Model</a><a class=menu-item href=https://atmosai.github.io/tools>Tools</a><a class=menu-item href=https://atmosai.github.io/tags>Tags</a><a class=menu-item href=https://atmosai.github.io/categories>Categories</a><a class=menu-item href=https://atmosai.github.io/friends>Friends</a><a class=menu-item href=https://atmosai.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><main class=main><div class=container><article class=page><h1 class="post-title animated flipInX">ESMF:模式间耦合及插值工具</h1><div class=post-meta><div class=post-meta-main><a class=author href=http://i-lightning.cn rel=author target=_blank><i class="fas fa-user-circle fa-fw"></i>bugsuse
</a>&nbsp;<span class=post-category>included in&nbsp;<i class="far fa-folder fa-fw"></i><a href=https://atmosai.github.io/categories/tools/>Tools</a>&nbsp;<i class="far fa-folder fa-fw"></i><a href=https://atmosai.github.io/categories/model/>Model</a>&nbsp;</span></div><div class=post-meta-other><i class="far fa-calendar-alt fa-fw"></i><time datetime=2018-11-20>2018-11-20</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 1254 words&nbsp;
<i class="far fa-clock fa-fw"></i>3 min&nbsp;</div></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#esmf_regridweightgen>ESMF_RegridWeightGen</a></li><li><a href=#regridding>Regridding</a></li><li><a href=#参考链接>参考链接：</a></li></ul></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Contents</span>
<span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><ul><li><a href=#esmf_regridweightgen>ESMF_RegridWeightGen</a></li><li><a href=#regridding>Regridding</a></li><li><a href=#参考链接>参考链接：</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>ESMF是用于耦合天气，气候和相关模式的工具，具有稳定，并行化和可扩展的插值(remapping)包，通常用于生成插值权重。ESMF可以处理大多数网格和选项：常规矩形网格，非结构网格(即网格大小不同的网格结构，比如ISCCP的网格)和一系列散点；区域或全球网格；2D或3D；极地(pole)或掩膜(masking)选项。ESMF也可以从NetCDF文件中读取网格信息，比如Climate and Forecast (CF) GridSpec 和 <a href=https://github.com/ugrid-conventions/ugrid-conventions target=_blank>UGRID</a> conventions 文件。</p><a class=post-dummy-target id=esmf_regridweightgen></a><h3>ESMF_RegridWeightGen</h3><p>ESMF中提供了大量的工具可用于处理模式间耦合的问题或者网格数据的插值等问题。ESMF_RegridWeightGen就是包含的ESMF发行版中，用于从文件生成插值权重的工具。</p><p>此工具支持串行和并行，其接受两个网格文件作为输入，然后生成一个权重文件。支持矩形和非结构网格。网格文件可以是四种不同的格式：</p><ul><li>用于SCRIP输入的SCRIP格式文件</li><li>遵从CF源数据标准的GRIDSPEC格式</li><li>自定义的ESMF非结构网格格式</li></ul><p>ESMF_RegridWeightGen 支持大量的选项用于控制插值权重的生成。目前支持五种类型的插值方法：bilinear, higher-order patch, first-order conservative,及另外两种 nearest neighbor法。有多个选项可用于处理极地周围(around the pole)的插值，也有部分参数可用于处理无法插值到目标网格的情况。</p><p>对于传统的一阶插值方法，此工具支持掩膜(masking)和用户自定义面积(user-supplied area)操作。</p><p>此外，ESMF_RegridWeightGen 还提供了一些参数用于检查所产生的权重。这个选项可以利用权重(weight)以及计算出的插值误差(interpolation error)和conservation error(如果使用conservative插值方法)针对分析场执行插值(regridding)。这些误差同时也会输出。</p><a class=post-dummy-target id=regridding></a><h3>Regridding</h3><p>Regridding(Remapping, Interpolation)是为了保证原始数据的质量而处理网格数据的过程。针对不同的问题需要进行不同的转换。尤其是当地球系统模式间(比如陆面和大气，或者不同数据集间的可视化操作等过程)进行数据交流时，插值是必要的。</p><p>Regridding主要分为两个部分：</p><ul><li>生成插值权重矩阵，描述原始网格中的点在目标网格中的权重</li><li>原始网格数据和权重矩阵相乘，从而生成目标网格数据</li></ul><p>不同的插值方法适用于不同的问题。基本的双线性插值是线性插值的二维变体。higher order patch recovery是一个二级多项式插值方法(second degree polynomial regridding method)，使用最小二乘法计算多项式。此方法比双线性插值得到的目标网格结果要好。还有两种最邻近插值法，可以将一个网格点的数据映射到另一个网格最邻近的点。这对于外推或者分类场来说非常有用。</p><p>一阶传统插值方法计算了从源网格到目标网格的字段的积分，使用源网格和目标网格的重叠部分来确定合适的权重。二阶传统插值方法使用的是源的梯度，从而给出比一阶算法更平滑的结果。所有的方法本质上都是数据和插值权重矩阵间的矩阵乘法操作。</p><p>本文仅对 ESMF 和 ESMF_RegridWeightGen 进行简要介绍，更多的使用操作后续会进行介绍。</p><a class=post-dummy-target id=参考链接></a><h3>参考链接：</h3><ol><li><a href=https://www.earthsystemcog.org/projects/regridweightgen/>https://www.earthsystemcog.org/projects/regridweightgen/</a></li><li><a href=http://www.earthsystemmodeling.org/esmf_releases/public/ESMF_7_1_0r/ESMF_refdoc/node3.html#SECTION03020000000000000000>http://www.earthsystemmodeling.org/esmf_releases/public/ESMF_7_1_0r/ESMF_refdoc/node3.html#SECTION03020000000000000000</a></li></ol></div><br><h3>相关文章</h3><div class=post-footer id=post-footer><div style="padding:10px 0;margin:20px auto;width:100%;font-size:16px;text-align:center"><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>打赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=/img/Wechat.jpeg alt="WeChat Pay"></a><p>微信打赏</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=/img/Alipay.jpeg alt=Alipay></a><p>支付宝打赏</p></div></div></div><div class=post-info><div class=post-info-line><div class=post-info-mod><span>The article was updated on 2018-11-20</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href="//twitter.com/share?url=https%3a%2f%2fatmosai.github.io%2f2018%2f11%2f2018-11-20-esmf%25E6%25A8%25A1%25E5%25BC%258F%25E9%2597%25B4%25E8%2580%25A6%25E5%2590%2588%25E5%258F%258A%25E6%258F%2592%25E5%2580%25BC%25E5%25B7%25A5%25E5%2585%25B7%2f&text=ESMF%3a%e6%a8%a1%e5%bc%8f%e9%97%b4%e8%80%a6%e5%90%88%e5%8f%8a%e6%8f%92%e5%80%bc%e5%b7%a5%e5%85%b7&via=xxxx" target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-fw"></i></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fatmosai.github.io%2f2018%2f11%2f2018-11-20-esmf%25E6%25A8%25A1%25E5%25BC%258F%25E9%2597%25B4%25E8%2580%25A6%25E5%2590%2588%25E5%258F%258A%25E6%258F%2592%25E5%2580%25BC%25E5%25B7%25A5%25E5%2585%25B7%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square fa-fw"></i></a><a href="//reddit.com/submit?url=https%3a%2f%2fatmosai.github.io%2f2018%2f11%2f2018-11-20-esmf%25E6%25A8%25A1%25E5%25BC%258F%25E9%2597%25B4%25E8%2580%25A6%25E5%2590%2588%25E5%258F%258A%25E6%258F%2592%25E5%2580%25BC%25E5%25B7%25A5%25E5%2585%25B7%2f&title=ESMF%3a%e6%a8%a1%e5%bc%8f%e9%97%b4%e8%80%a6%e5%90%88%e5%8f%8a%e6%8f%92%e5%80%bc%e5%b7%a5%e5%85%b7" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-fw"></i></a><a href="//service.weibo.com/share/share.php?url=https%3a%2f%2fatmosai.github.io%2f2018%2f11%2f2018-11-20-esmf%25E6%25A8%25A1%25E5%25BC%258F%25E9%2597%25B4%25E8%2580%25A6%25E5%2590%2588%25E5%258F%258A%25E6%258F%2592%25E5%2580%25BC%25E5%25B7%25A5%25E5%2585%25B7%2f&appkey=&title=ESMF%3a%e6%a8%a1%e5%bc%8f%e9%97%b4%e8%80%a6%e5%90%88%e5%8f%8a%e6%8f%92%e5%80%bc%e5%b7%a5%e5%85%b7" target=_blank title="Share on Weibo"><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section><span class=tag><a href=https://atmosai.github.io/tags/esmf/><i class="fas fa-tag fa-fw"></i>&nbsp;ESMF</a>&nbsp;</span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://atmosai.github.io>Home</a></span></section></div><div class=post-nav><a href=https://atmosai.github.io/2018/11/2018-11-19-wrf%E6%A8%A1%E5%BC%8F%E5%B5%8C%E5%A5%97%E6%A8%A1%E6%8B%9F/ class=prev rel=prev title=WRF模式嵌套模拟><i class="fas fa-angle-left fa-fw"></i>WRF模式嵌套模拟</a>
<a href=https://atmosai.github.io/2018/12/2018-12-04-%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%9B%BE/ class=next rel=next title=如何添加背景图>如何添加背景图<i class="fas fa-angle-right fa-fw"></i></a></div></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a></div><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2016 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://atmosai.github.io target=_blank>bugsuse</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span>
</a><script src=/js/lib/jquery/jquery.slim.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><script src=/js/blog.min.js></script></body></html>